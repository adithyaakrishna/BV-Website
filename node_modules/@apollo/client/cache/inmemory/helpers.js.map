{"version":3,"file":"helpers.js","sources":["helpers.js"],"sourcesContent":["import { isReference, isField } from '../../utilities/graphql/storeUtils';\nimport { DeepMerger } from '../../utilities/common/mergeDeep';\nexport var hasOwn = Object.prototype.hasOwnProperty;\nexport function getTypenameFromStoreObject(store, objectOrReference) {\n    return isReference(objectOrReference)\n        ? store.get(objectOrReference.__ref, \"__typename\")\n        : objectOrReference && objectOrReference.__typename;\n}\nvar FieldNamePattern = /^[_A-Za-z0-9]+/;\nexport function fieldNameFromStoreName(storeFieldName) {\n    var match = storeFieldName.match(FieldNamePattern);\n    return match ? match[0] : storeFieldName;\n}\nexport function storeValueIsStoreObject(value) {\n    return value !== null &&\n        typeof value === \"object\" &&\n        !isReference(value) &&\n        !Array.isArray(value);\n}\nexport function isFieldValueToBeMerged(value) {\n    var field = value && value.__field;\n    return field && isField(field);\n}\nexport function makeProcessedFieldsMerger() {\n    return new DeepMerger(reconcileProcessedFields);\n}\nvar reconcileProcessedFields = function (existingObject, incomingObject, property) {\n    var existing = existingObject[property];\n    var incoming = incomingObject[property];\n    if (isFieldValueToBeMerged(existing)) {\n        existing.__value = this.merge(existing.__value, isFieldValueToBeMerged(incoming)\n            ? incoming.__value\n            : incoming);\n        return existing;\n    }\n    if (isFieldValueToBeMerged(incoming)) {\n        incoming.__value = this.merge(existing, incoming.__value);\n        return incoming;\n    }\n    return this.merge(existing, incoming);\n};\n//# sourceMappingURL=helpers.js.map"],"names":[],"mappings":";;;AAEU,IAAC,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,eAAe;AAC7C,SAAS,0BAA0B,CAAC,KAAK,EAAE,iBAAiB,EAAE;AACrE,IAAI,OAAO,WAAW,CAAC,iBAAiB,CAAC;AACzC,UAAU,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,YAAY,CAAC;AAC1D,UAAU,iBAAiB,IAAI,iBAAiB,CAAC,UAAU,CAAC;AAC5D,CAAC;AACD,IAAI,gBAAgB,GAAG,gBAAgB,CAAC;AACjC,SAAS,sBAAsB,CAAC,cAAc,EAAE;AACvD,IAAI,IAAI,KAAK,GAAG,cAAc,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;AACvD,IAAI,OAAO,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC;AAC7C,CAAC;AACM,SAAS,uBAAuB,CAAC,KAAK,EAAE;AAC/C,IAAI,OAAO,KAAK,KAAK,IAAI;AACzB,QAAQ,OAAO,KAAK,KAAK,QAAQ;AACjC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC;AAC3B,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC9B,CAAC;AACM,SAAS,sBAAsB,CAAC,KAAK,EAAE;AAC9C,IAAI,IAAI,KAAK,GAAG,KAAK,IAAI,KAAK,CAAC,OAAO,CAAC;AACvC,IAAI,OAAO,KAAK,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC;AACnC,CAAC;AACM,SAAS,yBAAyB,GAAG;AAC5C,IAAI,OAAO,IAAI,UAAU,CAAC,wBAAwB,CAAC,CAAC;AACpD,CAAC;AACD,IAAI,wBAAwB,GAAG,UAAU,cAAc,EAAE,cAAc,EAAE,QAAQ,EAAE;AACnF,IAAI,IAAI,QAAQ,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC5C,IAAI,IAAI,QAAQ,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC5C,IAAI,IAAI,sBAAsB,CAAC,QAAQ,CAAC,EAAE;AAC1C,QAAQ,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,EAAE,sBAAsB,CAAC,QAAQ,CAAC;AACxF,cAAc,QAAQ,CAAC,OAAO;AAC9B,cAAc,QAAQ,CAAC,CAAC;AACxB,QAAQ,OAAO,QAAQ,CAAC;AACxB,KAAK;AACL,IAAI,IAAI,sBAAsB,CAAC,QAAQ,CAAC,EAAE;AAC1C,QAAQ,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;AAClE,QAAQ,OAAO,QAAQ,CAAC;AACxB,KAAK;AACL,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAC1C,CAAC;;;;"}